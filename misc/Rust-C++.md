# Rust / C++

## 我的经历

我2023年开始写Rust，一开始上手的难点包括：

- 函数式的，数据驱动的源码阅读方式
- 连环调用，以及陌生的函数（form/into，unwarp，borrow_mut）
- trait的运行时多态，看不出来具体的实现
- 大量黑魔法一样的过程宏，全局搜索都找不到的代码
- 严格的borrow check，编译不通过，为了过编译往往要顺着某个trait改一堆函数，改数据结构，换C++一下就写完了，rust要和编译器战斗半天

但是上手之后发现非常爽，爽点包括：

- 强迫我写出很好的工程架构，否则过不了编译
- 强迫我对模块的数据流动了如指掌，否则看不懂代码
- 组件形式的struct，自然能写出很好的结构
- 不会出现内存相关bug，只要能过编译就稳
- 过程宏减少了大量样板代码

2026年我又用回C++，发现现在优质的C++代码越来越像Rust:

- 引入了大量的模板库来实现Rust的关键字，比如Option和Result
- 尽可能的使用unique_ptr（性能和安全）
- 尽可能的使用组合替代继承

## 观点

我并不是所谓的“Rust教徒”，我认为没有必要把一个成熟的项目重构为Rust，因为这成本巨大并且很难获得质的性能飞跃（即使开发流程和未来维护上的收益巨大）

但是我认为C++程序员都有必要学习Rust，才能知道C++有什么坑，才能写出优质的C++代码

让我写一个新的项目，我一定会选择Rust，因为我不想忍受屎一样的包管理工具和开发工具，不想忍受面向对象的包袱，不想调试Segmentation Fault了